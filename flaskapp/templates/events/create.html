{% extends 'layouts/events/layout_create.html' %}
{% block title %}Flaskapp - Create Event{% endblock %}
{% block container %}
  <div class="jumbotron">
    <h4>Create Event</h4>
  </div>
  <div class="row">
    <div class="col-sm-12 col-md-12">&nbsp;</div>
  </div>
  {% raw %}
  <div class="top-pad" ng-app="eventsApp" ng-controller="formCtrl">
    <form name="baseForm" role="form" novalidate ng-cloak>
      <div class="animate-switch-container" ng-switch on="stage" ng-class="{forward: direction, backward:!direction,longStage: longStage}">
        <div class="animate-switch" ng-switch-default>
          <p>Welcome to the form.</p>
          <p>Validation is disabled for this test app so please add data to every field.</p>
          <button type="button" class="btn btn-success btn-sm" ng-click="next('stage1')">Next</button>
        </div>
        <div class="animate-switch" ng-switch-when="stage1">
          <div class="row">
            <div class="col-sm-5 col-md-6">
              <div class="form-group">
                <label for="tb-name">Name:</label>
                <input type="text" class="form-control" id="tb-name" ng-model="params.name">
              </div>
            </div>
            <div class="col-sm-7 col-md-6">&nbsp;</div>
          </div>
          <button type="button" class="btn btn-warning btn-sm" ng-click="back('')">Back</button>
          <button type="button" class="btn btn-success btn-sm" ng-click="next('stage2')">Next</button>
        </div>
        <div class="animate-switch" ng-switch-when="stage2">
          <div class="row">
            <div class="col-sm-5 col-md-6">
              <div class="form-group">
                <label for="tb-address">Address:</label>
                <input type="text" class="form-control" id="tb-address" ng-model="params.address">
              </div>
            </div>
            <div class="col-sm-2 col-md-3">
              <div class="form-group">
                <label for="tb-address-line-two">&nbsp;</label>
                <input type="text" class="form-control" id="tb-address-line-two" ng-model="params.address_line_two">
              </div>
            </div>
            <div class="col-sm-5 col-md-3">&nbsp;</div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-md-4">
              <div class="form-group">
                <label for="tb-city">City:</label>
                <input type="text" class="form-control" id="tb-city" ng-model="params.city">
              </div>
            </div>
            <div class="col-sm-2 col-md-2">
              <div class="form-group">
                <label for="tb-state">State:</label>
                <input type="text" class="form-control" id="tb-state" ng-model="params.state">
              </div>
            </div>
            <div class="col-sm-3 col-md-4">
              <div class="form-group">
                <label for="tb-zip-code">Zip Code:</label>
                <input type="text" class="form-control" id="tb-zip-code" ng-model="params.zip_code">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-md-4">
              <div class="form-group">
                <label for="tb-country">Country:</label>
                <input type="text" class="form-control" id="tb-country" ng-model="params.country">
              </div>
            </div>
            <div class="col-sm-9 col-md-8">&nbsp;</div>
          </div>
          <button type="button" class="btn btn-warning btn-sm" ng-click="back('stage1')">Back</button>
          <button type="button" class="btn btn-success btn-sm" ng-click="next('stage3')">Next</button>
        </div>
        <div class="animate-switch" ng-switch-when="stage3">
          <div class="row">
            <div class="col-sm-5 col-md-6">
              <div class="dropdown form-group">
                <label>Start Date</label>
                <a class="dropdown-toggle" id="dropdownStart" role="button" data-toggle="dropdown" data-target="#"
                   href="#">
                  <div class="input-group date">
                    <input type="text" class="form-control"
                           data-date-time-input="M/D/YYYY hh:mm A"
                           data-date-formats="['YYYY/MM/DD', 'MMM DD YYYY']"
                           data-ng-model="params.start_date">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                  </div>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                  <datetimepicker data-ng-model="params.start_date"
                                  data-datetimepicker-config="{ dropdownSelector: '#dropdownStart', renderOn: 'end-date-changed' }"
                                  data-on-set-time="startDateOnSetTime()"
                                  data-before-render="startDateBeforeRender($dates)"></datetimepicker>
                </ul>
              </div>
            </div>
            <div class="col-sm-7 col-md-6">&nbsp;</div>
          </div>
          <div class="row">
            <div class="col-sm-5 col-md-6">
              <div class="dropdown form-group">
                <label>End Date</label>
                <a class="dropdown-toggle" id="dropdownEnd" role="button" data-toggle="dropdown" data-target="#"
                   href="#">
                  <div class="input-group date">
                    <input type="text" class="form-control"
                           data-date-time-input="M/D/YYYY hh:mm A"
                           data-date-formats="['YYYY/MM/DD', 'MMM DD YYYY']"
                           data-ng-model="params.end_date">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                  </div>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                  <datetimepicker data-ng-model="params.end_date"
                                  data-datetimepicker-config="{ dropdownSelector: '#dropdownEnd', renderOn: 'start-date-changed' }"
                                  data-on-set-time="endDateOnSetTime()"
                                  data-before-render="endDateBeforeRender($view, $dates, $leftDate, $upDate, $rightDate)"></datetimepicker>
                </ul>
              </div>
            </div>
            <div class="col-sm-7 col-md-6">&nbsp;</div>
          </div>
          <button type="button" class="btn btn-warning btn-sm" ng-click="back('stage2')">Back</button>
          <button type="button" class="btn btn-success btn-sm" ng-click="next('stage4')">Next</button>
        </div>
        <div class="animate-switch" ng-switch-when="stage4">
          <div class="row">
            <div class="col-sm-5 col-md-6">
              <div class="form-group">
                <label for="tb-guest-email">Guest email:</label>
                <input type="text"
                       id="tb-guest-email"
                       class="form-control"
                       ng-model="params.guestEmail" />
              </div>
            </div>
            <div class="col-sm-7 col-md-6">
              <div>&nbsp;</div>
              <button type="button" class="btn btn-info btn-xs" ng-click="addGuestEmail()">Add</button>
            </div>
            <div class="row">
              <div class="col-sm-12 col-md-12">&nbsp;</div>
            </div>
          </div>
          <div class="row" ng-hide="params.guests.length > 0">
            <div class="col-sm-5 col-md-6">
              No guest email addresses added, yet.
            </div>
            <div class="row">
              <div class="col-sm-12 col-md-12">&nbsp;</div>
            </div>
          </div>
          <div ng-repeat="e in params.guests">
            <div class="row">
              <div class="col-sm-12 col-md-12">
                {{ e.email }}&nbsp;&nbsp;<button type="button" class="btn btn-danger btn-xs" ng-click="removeGuestEmail(e.row_id)">Remove</button>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 col-md-12">&nbsp;</div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-md-12">
              <button type="button" class="btn btn-warning btn-sm" ng-click="back('stage3')">Back</button>
              <button type="button" class="btn btn-success btn-sm" ng-click="next('stage5')">Next</button>
            </div>
          </div>
        </div>
        <div class="animate-switch" ng-switch-when="stage5">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <h3>Items</h3>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">&nbsp;</div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-md-4">
              <div class="form-group">
                <label for="tb-item-name">Name</label>
                <input type="text"
                       id="tb-item-name"
                       class="form-control"
                       ng-model="params.itemName" />
              </div>
            </div>
            <div class="col-sm-2 col-md-3">
              <div class="form-group">
                <label for="tb-item-quantity">Quantity</label>
                <input type="text"
                       id="tb-item-quantity"
                       class="form-control"
                       ng-model="params.itemQuantity" />
              </div>
            </div>
            <div class="col-sm-2 col-md-2">
              <div>&nbsp;</div>
              <button type="button" class="btn btn-info btn-xs" ng-click="addItem()">Add</button>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">&nbsp;</div>
          </div>
          <div class="row" ng-hide="params.items.length > 0">
            <div class="col-sm-5 col-md-6">
              No event items added, yet.
            </div>
          </div>
          <div ng-repeat="i in params.items">
            <div class="row">
              <div class="col-sm-2 col-md-3">
                {{ i.name }}
              </div>
              <div class="col-sm-1 col-md-2">
                {{ i.quantity }}
              </div>
              <div class="col-sm-1 col-md-2">
                <button type="button" class="btn btn-danger btn-xs" ng-click="removeItem(i.itemId)">Remove</button>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 col-md-12">&nbsp;</div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">&nbsp;</div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-md-12">
              <button type="button" class="btn btn-warning btn-sm" ng-click="back('stage4')">Back</button>
              <button type="button" class="btn btn-success btn-sm" ng-click="next('stage6')">Next</button>
            </div>
          </div>
        </div>
        <div class="animate-switch" ng-switch-when="stage6">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <h3>Summary</h3>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">&nbsp;</div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">
              Event name: {{ params.name }}
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">&nbsp;</div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12"><strong>Guests</strong></div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">&nbsp;</div>
          </div>
          <div ng-repeat="e in params.guests">
            <div class="row">
              <div class="col-sm-12 col-md-12">
                {{ e.email }}
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 col-md-12">&nbsp;</div>
            </div>
          </div>
          <div class="row">&nbsp;</div>
          <!--
          <div class="row">
            <pre> {{ params | json }}</pre>
          </div>
          -->
          <button type="button" class="btn btn-warning btn-sm" ng-click="back('stage5')">Back</button>
          <button type="button" class="btn btn-primary btn-sm" ng-click="submitForm()">Create</button>
        </div>
        <div class="animate-switch" ng-switch-when="createSuccess">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <h4>Success!</h4>
            </div>
          </div>
          <div class="row">
            &nbsp;
          </div>
          <div class="col-sm-12 col-md-12">
            <p>Redirecting to your events...</p>
          </div>
        </div>
        <div class="animate-switch" ng-switch-when="createError">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <h4>Error</h4>
            </div>
          </div>
          <div class="row">
            &nbsp;
          </div>
          <div class="col-sm-12 col-md-12">
            <p>Redirecting to your events...</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">&nbsp;</div>
      </div>
    </form>
    <div class="row">
      <div class="col-md-12">&nbsp;</div>
    </div>
  </div>
  {% endraw %}
{% endblock %}
