angular.module("templates",[]).run(["$templateCache",function(t){t.put("events/event.html",'<!-- Items -->\n<div ng-repeat="item in event.items_data">\n  <item-row ng-if="item.active === true" item="item"></item-row>\n</div>\n<div class="row">\n  <div class="col-xs-12 col-sm-12 col-md-12">&nbsp;</div>\n</div>\n<div class="row">\n  <div class="col-xs-12 col-sm-12 col-md-12">\n    <h4><strong>Removed Items</strong></h4>\n  </div>\n</div>\n<div ng-repeat="item in event.items_data">\n  <item-row ng-if="item.active === false" item="item"></item-row>\n</div>\n<!-- End Items -->\n'),t.put("events/items/item.html",'<div ng-class="{\'item-removed\': item.active === false}">\n  <div class="row">\n    <div class="col-xs-2 col-sm-2 col-md-3"><strong>Name:</strong> {{ item.name }}</div>\n    <div class="col-xs-2 col-sm-2 col-md-2">Quantity: {{ item.quantity }}</div>\n    <div class="col-xs-2 col-sm-2 col-md-2">Claimed: {{ item.quantity_claimed }}</div>\n    <div class="col-xs-2 col-sm-2 col-md-2">\n      <button type="button" class="btn btn-danger btn-xs" ng-click="$parent.removeItem(item.id)">\n        <span ng-if="item.active===true">Remove Item</span>\n        <span ng-if="item.active===false">Reactivate Item</span>\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12">&nbsp;</div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12">&nbsp;</div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12"><strong>Claimed:</strong></div>\n  </div>\n  <!-- Subitems -->\n  <div ng-repeat="subitem in item.subitems">\n    <subitem-row subitem="subitem" host-id="hostId"></subitem-row>\n  </div>\n  <!--End Subitems -->\n  <div class="row" ng-if="subitemsFlag">\n    <div class="col-sx-12 col-sm-12 col-md-12">No items claimed.</div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12">&nbsp;</div>\n  </div>\n  <div class="row" ng-if="hostSubitemsFlag">\n    <div class="col-sx-4 col-sm-4 col-md-4">You\'ve claimed none of this item.</div>\n    <!--\n    <div class="col-xs-2 col-sm-2 col-md-2">\n      <button type="button" class="btn btn-primary btn-sm" ng-click="addSubitemRow()">\n        Claim\n      </button>\n    </div>\n    -->\n  </div>\n  <div class="row" ng-if="hostSubitemsFlag">\n    <div class="col-xs-2 col-sm-2 col-md-1">\n      <div class="form-group">\n        <label for="{{\'tb-subitem-quantity-\' + subitem.id}}">&nbsp;</label>\n        <input type="text"\n               id="{{\'tb-subitem-quantity-\' + subitem.id}}"\n               class="form-control"\n               ng-model="quantity">\n      </div>\n    </div>\n    <div class="col-xs-2 col-sm-2 col-md-2">\n      <button type="button" class="btn btn-primary btn-sm" ng-click="$parent.$parent.addNewHostSubitem(item.id, quantity)">\n        Add\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <hr >\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12">&nbsp;</div>\n  </div>\n</div>\n'),t.put("events/subitems/subitem.html",'<div class="row" ng-if="subitem.user_id != hostId">\n  <!-- Need to add more user information here so Host can view user info. -->\n  <div class="col-sx-2 col-sm-2 col-md-2">User: {{ subitem.user_id }}</div>\n  <div class="col-sx-2 col-sm-2 col-md-2">Quantity: {{ subitem.quantity }}</div>\n</div>\n<div class="row" ng-if="subitem.user_id === hostId">\n  <div class="col-sx-2 col-sm-2 col-md-2">You\'ve claimed:</div>\n  <div class="col-xs-2 col-sm-2 col-md-1">\n    <div class="form-group">\n      <label for="{{\'tb-subitem-quantity-\' + subitem.id}}">&nbsp;</label>\n      <input type="text"\n             id="{{\'tb-subitem-quantity-\' + subitem.id}}"\n             class="form-control"\n             ng-model="subitem.quantity">\n    </div>\n  </div>\n  <div class="col-xs-2 col-sm-2 col-md-2">\n    <!--Had to add the second $parent because of the ng-if. -->\n    <button type="button" class="btn btn-primary btn-sm" ng-click="$parent.$parent.updateItem()">\n      Update\n    </button>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12 col-sm-12 col-md-12">&nbsp;</div>\n</div>\n')}]),angular.module("eventsApp",["templates","eventsApp.events","ngAnimate"]),angular.module("eventsApp.events",["events.controllers","events.event","events.directives","events.services","events.item-service"]).run(["$rootScope",function(t){}]),angular.module("events.controllers",[]).controller("eventsCtrl",["$scope","$http","$timeout","EventService","ItemService",function(t,e,s,n,i){t.params=[],t.carbon=[],t.formValid=!1,t.rowId=0,t.stage="",t.longStage=0,t.toggleEventObjView=!1,n.getItems().then(function(e){t.params=e.data}),t.removeItem=function(e){t.direction=1,t.stage="loading",n.removeItem(e).then(function(e){e.data&&"OK"===e.data.status?(console.log("removeItem: OK!"),t.reset()):e.data&&"Error"===e.data.status&&(t.direction=1,scope.stage="error",console.log("removeItem: Error!"))})},t.claimItems=function(){JSON.stringify(t.params.items_data);t.direction=1,t.stage="loading",t.longStage=1,n.updateItems(t.params.items_data).then(function(e){e.data&&"OK"===e.data.status?(console.log("updateitems: OK!"),t.reset()):e.data&&"Error"===e.data.status&&(t.direction=1,t.stage="error",console.log("removeItem: Error!"))})},t.addNewHostSubitem=function(e,s){console.log("Testing!!");for(var n,o=0;o<t.params.items_data.length;o++)(t.params.items_data[o].id=e)&&(n=t.params.items_data[o]);var a={row_id:0,quantity:s,user_id:0};n.subitems=[],n.subitems.push(a),i.updateItem(n).then(function(t){t.data&&"OK"===t.data.status?console.log("updateitem: OK!"):t.data&&"Error"===t.data.status&&console.log("removeItem: Error!")})},t.reset=function(){t.params={},n.getItems().then(function(e){t.params=e.data}),t.direction=1,t.stage="",t.longStage=0}}]),angular.module("events.directives",[]).directive("itemRow",["ItemService",function(t){return{restrict:"E",templateUrl:"events/items/item.html",scope:{item:"=",hostId:"="},link:function(e,s,n){e.subitemId=0,e.subitemsFlag=!1,e.hostSubitemsFlag=!1,e.$watch("item.quantity_claimed",function(){0===e.item.quantity_claimed?(e.subitemsFlag||(e.subitemsFlag=!0),e.hostSubitemsFlag?e.hostSubitemsFlag=!1:e.hostSubitemsFlag=!0):e.item.subitems.length<=0&&(e.subitemsFlag||(e.subitemsFlag=!0),e.hostSubitemsFlag?e.hostSubitemsFlag=!1:e.hostSubitemsFlag=!0)}),e.$watch("item.subitems",function(){for(var t=0;t<e.item.subitems.length;t++){var s=e.item.subitems[t];s.user_id===e.hostId,s.user_id!=e.hostId?e.hostSubitemsFlag||(e.hostSubitemsFlag=!0):e.hostSubitemsFlag=!1}}),e.addSubitemRow=function(){e.subitemId++;var t={row_id:e.subitemId,quantity:0,user_id:0};e.item.subitems.push(t)},e.updateItem=function(){t.updateItem(e.item).then(function(t){t.data&&"OK"===t.data.status?console.log("updateitem: OK!"):t.data&&"Error"===t.data.status&&console.log("removeItem: Error!")})}}}}]).directive("subitemRow",function(){return{restrict:"E",templateUrl:"events/subitems/subitem.html",scope:{subitem:"=",hostId:"="},link:function(t,e,s){}}}),angular.module("events.item-service",[]).factory("ItemService",function(t){return{updateItem:function(e){var s=JSON.stringify(e);return t({method:"POST",url:"/events/updatehostitem",data:s}).then(function(t){return t},function(t){console.log(t)})}}}),angular.module("events.services",[]).factory("EventService",function(t){return{getItems:function(){var e=location.pathname,s=e.split("/events/host/",2)[1],n={paramId:s};return t({method:"POST",url:"/events/getitemshost",data:JSON.stringify(n)}).then(function(t){return t},function(t){console.log(t)})},removeItem:function(e){var s={paramId:e};return t({method:"POST",url:"/events/removeitem",data:JSON.stringify(s)}).then(function(t){return t},function(t){console.log(t)})},updateItems:function(e){var s=JSON.stringify(e);return t({method:"POST",url:"/events/updateitems",data:s}).then(function(t){return t},function(t){console.log(t)})}}});
//# sourceMappingURL=host.min.js.map
